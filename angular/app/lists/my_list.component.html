<div class="header">

  <form [ngFormModel]="form" (ngSubmit)="onAddTranslation()"  >
    <fieldset>
      <legend>Add translation</legend>
      <input type="text" ngControl="spanish" placeholder="Spanish" class="text-input" #inputSpanish >
      <input type="text" ngControl="english" placeholder="English" class="text-input">
      <input type="text" ngControl="context" placeholder="Context" class="text-input">
      <input type="text" ngControl="category" placeholder="Category" class="text-input">
      <input type="submit" class="button button-white" value="Add Translation">
    </fieldset>
  </form>

  <!-- Todo: Is the form tag nessesary here? -->
  <form>
    <fieldset>
      <legend>Filter</legend>
        <div class="filter-wrapper">
          <div class="filter-header">
            Category
          </div>

          <ul class="filter-list clean-list">
            <li class="filter-item">
              <a  class="filter-link"
                  (click)="onFilterCategory( 'verb' )" >
                  Verbs
                  <span class="filter-count">{{ listCounts.category.verbs }}</span>
              </a>
            </li>
            <li class="filter-item">
              <a  class="filter-link"
                  (click)="onFilterCategory( 'idiom' )" >
                  Idioms
                  <span class="filter-count">{{ listCounts.category.idioms }}</span>
              </a>
            </li>
            <li class="filter-item">
              <a  class="filter-link"
                  (click)="onFilterCategory( 'phrase' )" >
                  Phrases
                  <span class="filter-count">{{ listCounts.category.phrases }}</span>
              </a>
            </li>
            <li class="filter-item">
              <a  class="filter-link"
                  (click)="onFilterCategory( 'noun' )" >
                  Noun
                  <span class="filter-count">{{ listCounts.category.nouns }}</span>
              </a>
            </li>
            <li class="filter-item">
              <a  class="filter-link"
                  (click)="onFilterCategory( 'conjunction' )" >
                  Conjunctions
                  <span class="filter-count">{{ listCounts.category.conjunctions }}</span>
              </a>
             </li>
            <li class="filter-item">
              <a  class="filter-link"
                  (click)="onFilterCategory( 'adjective' )" >
                  Adjective
                  <span class="filter-count">{{ listCounts.category.adjectives }}</span>
              </a>
            </li>
            <li class="filter-item">
              <a  class="filter-link"
                  (click)="onFilterCategory( 'other' )" >
                  Other
                  <span class="filter-count">{{ listCounts.category.other }}</span>
              </a>
            </li>
          </ul>
        </div>










        <div class="filter-wrapper">
          <div class="filter-header">
            Buckets
          </div>

          <ul class="filter-list clean-list">
            <li class="filter-item">
            <a class="filter-link"
                (click)="onFilterBucket( -1 )" >
                Not played
                <span class="filter-count">{{ listCounts.buckets[0] }}</span>
              </a>
            </li>
            <li class="filter-item">
              <a class="filter-link"
                (click)="onFilterBucket( 0 )" >
                Bucket-1
                <span class="filter-count">{{ listCounts.buckets[1] }}</span>
              </a>
            </li>
            <li class="filter-item">
              <a class="filter-link"
                (click)="onFilterBucket( 1 )" >
                Bucket-2
                <span class="filter-count">{{ listCounts.buckets[2] }}</span>
              </a>
            </li>
            <li class="filter-item">
              <a class="filter-link"
                (click)="onFilterBucket( 2 )" >
                Bucket-3
                <span class="filter-count">{{ listCounts.buckets[3] }}</span>
              </a>
            </li>
            <li class="filter-item">
              <a class="filter-link"
                (click)="onFilterBucket( 3 )" >
                Bucket-4
                <span class="filter-count">{{ listCounts.buckets[4] }}</span>
              </a>
            </li>
            <li class="filter-item">
              <a class="filter-link"
                (click)="onFilterBucket( 4 )" >
                Bucket-5
                <span class="filter-count">{{ listCounts.buckets[5] }}</span>
              </a>
            </li>
            <li class="filter-item">
              <a class="filter-link"
                (click)="onFilterBucket( 5 )" >
                Bucket-6
                <span class="filter-count">{{ listCounts.buckets[6] }}</span>
              </a>
            </li>
          </ul>
        </div>


      <input type="submit" class="button button-white" value="36 Urgent">
      <span class="fg-white">
        <a  class="clickable"
            (click)="onDisplayAll()" >
            Total {{ quantity }}
        </a>
      </span>
    </fieldset>
  </form>

</div>

<div class="sub-header clearfix">

  <div class="list-counter clearfix">
    <div class="list-counter-number">
      50
    </div>
    <div class="list-counter-label">
      Words in <br> play list
    </div>
  </div>

</div>

<table class="table">
  <thead>
    <tr>
      <td></td>
      <td class="clickable" (click)="onSortBy('Spanish')">Spanish</td>
      <td class="clickable" (click)="onSortBy('English')">English</td>
      <td>Context</td>
      <td class="clickable" (click)="onSortBy('Category')">Category</td>
      <td>Played</td>
      <td>Difficulty</td>
      <td class="clickable" (click)="onSortBy('Bucket')">Bucket</td>
      <td>Attemps</td>
      <td></td>
      <td></td>
      <td>private_list</td>
    </tr>
  </thead>
  <tbody>
    <tr
        *ngFor="#translation of list.collection"
        id="translation-{{translation.id}}"
        class="list-row"
        [class.row-highlight]="translation.id === affectedTranslationId">
      <td>
        <i  (click)="onAddToPrivate( $event )"
            class="fa fa-check fa-2x clickable"
            aria-hidden="true"
            id="{{translation.id}}"
            [ngClass]="{'fg-green': isAdded === true}"
            [ngClass]="{'fg-grey-dark': isAdded === false}">
        </i>
        <!-- todo: replace with data-id instead of id attribute -->
        <!-- <button (click)="onAddToPrivate( $event )" id="{{translation.id}}" class="button">Add</button> -->
      </td>
      <td class="fs-medium">
        {{translation.spanish}}
      </td>
      <td class="fs-medium">
        {{translation.english}}
      </td>
      <td class="fs-medium">
        {{translation.context}}
      </td>
      <td class="fs-smallest">
        {{translation.category}}
      </td>
      <td>
        <div *ngIf="translation.no_of_attempts">
          <i class="fa fa-calendar" aria-hidden="true"></i>
          {{translation.days_ago}}
        </div>
      </td>
      <td>
        <div *ngIf="translation.no_of_attempts"
          [class.fg-red]="translation.difficulty > 70"
          [class.fg-green]="translation.difficulty < 30"
          >
          <i class="fa fa-line-chart" aria-hidden="true"></i>
          {{translation.difficulty}}%
        </div>
      </td>
      <td>
        <div *ngIf="translation.no_of_attempts">
          <strength-wiget [bucket]="translation.bucket + 1" ></strength-wiget>
        </div>
      </td>
      <td>
        <div class="attempts clearfix" *ngIf="translation.no_of_attempts">
          <div class="attempt-left attempts-total">
            {{translation.no_of_attempts}}
          </div>
          <div class="attempt-right">
            <div class="attempts-failed">
              {{translation.no_of_failed}}
            </div>
            <div class="attempts-succeeded">
              {{translation.no_of_succeeded}}
            </div>
          </div>
        </div>
      </td>
      <td>
      <i
        class="fa fa-pencil clickable"
        aria-hidden="true"
        (click)="onEditTranslation( $event )"
        [attr.data-id]="translation.id"
        id="edit-{{translation.id}}">
      </i>
        <!-- <button
          (click)="onEditTranslation( $event )"
          [attr.data-id]="translation.id"
          id="edit-{{translation.id}}"
          class="button">Edit
        </button> -->
      </td>
      <td>
        <i
          class="fa fa-trash-o clickable"
          aria-hidden="true"
          (click)="onDeleteTranslation( $event )"
          id="{{translation.id}}"
          >
          </i>
        <!-- todo: replace with data-id instead of id attribute -->
<!--         <button (click)="onDeleteTranslation( $event )" id="{{translation.id}}" class="button">Delete</button> -->
      </td>
      <td>
        <span *ngIf="translation.strength">
          {{translation.private_match}}
        </span>
      </td>
    </tr>
  </tbody>
</table>


<div class="edit-popup" [hidden]="closeEditTranslation" >
  <form [ngFormModel]="editForm" (ngSubmit)="onUpdateTranslation()" #editFormElement >
    <input type="text" ngControl="spanish" placeholder="Spanish" class="text-input">
    <input type="text" ngControl="english" placeholder="English" class="text-input">
    <input type="text" ngControl="context" placeholder="Context" class="text-input">
    <input type="text" ngControl="category" placeholder="Category" class="text-input">
    <input type="submit" class="button button-white" value="Update Translation">
  </form>
  <button class="button button-white right" (click)="onCancelEditTranslation()">Cancel</button>
</div>














